{% extends "layouts/main.njk" %}
{% block body %}

<h3 class="text-white text-center bg-dark" style="margin:6px 0px 0px 0px;">Change Password</h3>
<hr style="border-top: 1px solid #5375BD;">

<form role="form" autocomplete="off" action="/change" method="post">
	<input type="hidden" name="token" value="{{token}}">
	<input type="hidden" name="email" id="email" value="{{email}}">
	<div class="form-group">
		<p class="text-white font-weight-light text-justify" style="font-size:0.7em;">La password deve essere di almeno 6 caratteri, contenente un numero, una lettera minuscola, una maiuscola e un carattere speciale.</p>             
		<div style="color:#ffc107; font-size:0.9em; margin-bottom:5px;" id="wrongPwd"></div>            
		<div class="contenitore">
			<input placeholder="Password" autocomplete="new-password" type="password" class="form-control" id="inputPassword" name="password" autofocus  required>
			<a class="password-toggle-icon"><i class="bi bi-eye" id="togglePassword"></i></a>
		</div>
	</div>

	<div class="form-group">        
		<div style="color:#ffc107; font-size:0.9em; margin-bottom:5px;" id="wrongPwd2"></div>
		<div class="contenitore">
			<input placeholder="Conferma Password" type="password" class="form-control" id="confirmPassword" name="confirm" required>
			<a class="passwordConfirm-toggle-icon"><i class="bi bi-eye" id="toggleConfirmPassword"></i></a>
		</div>
	</div>
	<div style="margin-bottom: 40px; margin-top:40px;">
		<button type="button" class="btn btn-my btn-lg btn-block" onclick="return fieldsResetControl()">
			Change Password
		</button>
	</div>
</form>

<script type="text/javascript">
	const passwordField = document.getElementById("inputPassword");
	const togglePassword = document.querySelector(".password-toggle-icon i");
	const confirmPasswordField = document.getElementById("confirmPassword");
	const toggleConfirmPassword = document.querySelector(".passwordConfirm-toggle-icon i");

	togglePassword.addEventListener("click", function () {
		if (passwordField.type === "password") {
			passwordField.type = "text";
			togglePassword.classList.remove("bi-eye");
			togglePassword.classList.add("bi-eye-slash");
		} else {
			passwordField.type = "password";
			togglePassword.classList.remove("bi-eye-slash");
			togglePassword.classList.add("bi-eye");
		}
	});

	toggleConfirmPassword.addEventListener("click", function () {
		if (confirmPasswordField.type === "password") {
			confirmPasswordField.type = "text";
			toggleConfirmPassword.classList.remove("bi-eye");
			toggleConfirmPassword.classList.add("bi-eye-slash");
		} else {
			confirmPasswordField.type = "password";
			toggleConfirmPassword.classList.remove("bi-eye-slash");
			toggleConfirmPassword.classList.add("bi-eye");
		}
	});
</script>    

{% endblock %}
