{% extends "layouts/main.njk" %}
{% block body %}

<style>
    table {
        width: 100%;
        /* Larghezza della tabella */
        margin: 10px auto;
        /* Centra la tabella n pagina */
        border-collapse: collapse;
        /* Rimuove gli spazi tra i bordi delle celle */
        background-color: #2A0009;
        /* Colore di sfondo della tabella */
    }

    th,
    td {
        border: 1px solid #903246;
        /* Colore del bordo pi√π chiaro */
        padding: 2px;
        /* Interspaziatura interna */
        color: white;
        /* Colore del testo */
        text-align: left;
        /* Allineamento del testo */
        font-size: 0.8em
    }

    th {
        background-color: #3B1A1E;
        /* Colore di sfondo per l'intestazione */
    }
</style>
{% for user in users %}
<table>
    <thead>
        <th colspan="4" style="font-size:1.2em">{{ user.local.name.first }} {{ user.local.name.last }}</th>
    </thead>
    <tr>

        <td colspan="2">{{ user.local.email }}</td>
        <td colspan="2">{{ user.local.mobilePrefix }} {{ user.local.mobileNumber }}</td>

    </tr>

    <tr>
        <thead>
            <th colspan="4"> Indirizzi </th>
        </thead>
    </tr>
    <tbody>
        {% for address in user.addresses %}
        <tr>
            <td>{{ address.name.first }} {{ address.name.last }}</td>
            <td>{{ address.mobilePrefix }} {{ address.mobileNumber }}</td>
            {% if address.main == "yes" %}
            <td colspan="2" style="background-color:yellow; color:#2A0009">
            {%else%}
            <td colspan="2">
                {%endif%}
                {{ address.address }}, {{ address.houseNumber }}, {{ address.city }}, {{ address.province }}, {{
                address.postcode }}
            </td>
        </tr>
        {% endfor %}
        {% if (user.friends | length) > 0 %}
        <thead>
            <th colspan="4"> Amici </th>
        </thead>
        {% endif %}
        {% for friend in user.friends %}
        <tr>
            {% if friend.status == "accepted" %}
            <td colspan="1" style="background-color: green">
                {% else %}
            <td colspan="1" style="background-color: red">
                {%endif%}
                {{ friend.name.first }} {{ friend.name.last }}
            </td>
            <td colspan="3">{{ friend.email }} <br> {{ friend.insertDate.toLocaleDateString('it-IT', { day: '2-digit',
                month: '2-digit', year: 'numeric' }) }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endfor %}

{% endblock %}